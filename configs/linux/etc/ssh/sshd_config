# SSH configuration for development container

Port 2222
Protocol 2

# Use custom host keys from persistent storage
HostKey /home/dev/.security/ssh-host-keys/ssh_host_rsa_key
HostKey /home/dev/.security/ssh-host-keys/ssh_host_ecdsa_key
HostKey /home/dev/.security/ssh-host-keys/ssh_host_ed25519_key

# Security settings
PermitRootLogin no
AuthorizedKeysFile .ssh/authorized_keys
PasswordAuthentication no
PubkeyAuthentication yes
ChallengeResponseAuthentication no

# Only allow specific user
AllowUsers dev

# Additional security
PermitEmptyPasswords no
MaxAuthTries 3
MaxSessions 10
LoginGraceTime 30

# Connection management
ClientAliveInterval 300
ClientAliveCountMax 3

# Algorithm restrictions for security
KexAlgorithms curve25519-sha256,curve25519-sha256@libssh.org,ecdh-sha2-nistp521
Ciphers chacha20-poly1305@openssh.com,aes256-gcm@openssh.com,aes128-gcm@openssh.com
MACs hmac-sha2-256-etm@openssh.com,hmac-sha2-512-etm@openssh.com

# Logging
SyslogFacility AUTH
LogLevel INFO